# Hints â€” Multi-Block Reduction

## Coarsened loading
```cuda
int gid = blockIdx.x * blockDim.x * COARSEN + threadIdx.x;
float sum = 0.0f;
for (int i = 0; i < COARSEN; i++) {
    int idx = gid + i * blockDim.x;
    if (idx < n) sum += input[idx];
}
sdata[tid] = sum;
```

## Tree reduction (standard pattern)
```cuda
for (int s = blockDim.x / 2; s > 0; s >>= 1) {
    if (tid < s) sdata[tid] += sdata[tid + s];
    __syncthreads();
}
```

## AtomicAdd at the end
```cuda
if (tid == 0) atomicAdd(output, sdata[0]);
```
