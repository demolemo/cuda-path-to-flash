# Hints â€” Histogram

## Init shared histogram
```cuda
// If NUM_BINS <= BLOCK_SIZE, one element per thread
if (tid < NUM_BINS) local_hist[tid] = 0;
// If NUM_BINS > BLOCK_SIZE, loop
for (int i = tid; i < NUM_BINS; i += blockDim.x)
    local_hist[i] = 0;
```

## Accumulate (privatized)
```cuda
if (gid < n)
    atomicAdd(&local_hist[input[gid]], 1);
```

## Merge to global
```cuda
for (int i = tid; i < NUM_BINS; i += blockDim.x)
    atomicAdd(&histogram[i], local_hist[i]);
```

## Coarsened accumulate
```cuda
for (int i = 0; i < COARSEN; i++) {
    int idx = gid + i * blockDim.x;
    if (idx < n) atomicAdd(&local_hist[input[idx]], 1);
}
```
